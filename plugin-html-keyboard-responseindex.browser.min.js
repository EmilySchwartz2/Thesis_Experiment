var jsPsychHtmlKeyboardResponse=function(r){"use strict";var y="2.1.0",c=Object.defineProperty,d=Object.defineProperties,h=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,u=(i,t,e)=>t in i?c(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,f=(i,t)=>{for(var e in t||(t={}))P.call(t,e)&&u(i,e,t[e]);if(o)for(var e of o(t))_.call(t,e)&&u(i,e,t[e]);return i},b=(i,t)=>d(i,h(t));const T={name:"html-keyboard-response",version:y,parameters:{stimulus:{type:r.ParameterType.HTML_STRING,default:void 0},choices:{type:r.ParameterType.KEYS,default:"ALL_KEYS"},prompt:{type:r.ParameterType.HTML_STRING,default:null},stimulus_duration:{type:r.ParameterType.INT,default:null},trial_duration:{type:r.ParameterType.INT,default:null},response_start_time:{type:r.ParameterType.INT,default:null},response_end_time:{type:r.ParameterType.INT,default:null},response_ends_trial:{type:r.ParameterType.BOOL,default:!0}},data:{response:{type:r.ParameterType.STRING},rt:{type:r.ParameterType.INT},stimulus:{type:r.ParameterType.STRING}},citations:{apa:"de Leeuw, J. R., Gilbert, R. A., & Luchterhandt, B. (2023). jsPsych: Enabling an Open-Source Collaborative Ecosystem of Behavioral Experiments. Journal of Open Source Software, 8(85), 5351. https://doi.org/10.21105/joss.05351 ",bibtex:'@article{Leeuw2023jsPsych, 	author = {de Leeuw, Joshua R. and Gilbert, Rebecca A. and Luchterhandt, Bj{\\" o}rn}, 	journal = {Journal of Open Source Software}, 	doi = {10.21105/joss.05351}, 	issn = {2475-9066}, 	number = {85}, 	year = {2023}, 	month = {may 11}, 	pages = {5351}, 	publisher = {Open Journals}, 	title = {jsPsych: Enabling an {Open}-{Source} {Collaborative} {Ecosystem} of {Behavioral} {Experiments}}, 	url = {https://joss.theoj.org/papers/10.21105/joss.05351}, 	volume = {8}, }  '}};class p{constructor(t){this.jsPsych=t}trial(t,e){var a='<div id="jspsych-html-keyboard-response-stimulus">'+e.stimulus+"</div>";e.prompt!==null&&(a+=e.prompt),t.innerHTML=a;var s={rt:null,key:null},l,v=e.response_start_time||0;const m=()=>{typeof l!="undefined"&&this.jsPsych.pluginAPI.cancelKeyboardResponse(l);var n={rt:s.rt,stimulus:e.stimulus,response:s.key};this.jsPsych.finishTrial(n)};var j=n=>{t.querySelector("#jspsych-html-keyboard-response-stimulus").className+=" responded",s.key==null&&(s=b(f({},n),{rt:n.rt+v})),e.response_ends_trial&&m()};if(e.choices!="NO_KEYS"){const n=()=>{l=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:j,valid_responses:e.choices,rt_method:"performance",persist:!1,allow_held_key:!1}),e.response_end_time!==null&&this.jsPsych.pluginAPI.setTimeout(()=>{typeof l!="undefined"&&this.jsPsych.pluginAPI.cancelKeyboardResponse(l)},e.response_end_time)};e.response_start_time!==null?this.jsPsych.pluginAPI.setTimeout(n,e.response_start_time):n()}e.stimulus_duration!==null&&this.jsPsych.pluginAPI.setTimeout(()=>{t.querySelector("#jspsych-html-keyboard-response-stimulus").style.visibility="hidden"},e.stimulus_duration),e.trial_duration!==null&&this.jsPsych.pluginAPI.setTimeout(m,e.trial_duration)}simulate(t,e,a,s){e=="data-only"&&(s(),this.simulate_data_only(t,a)),e=="visual"&&this.simulate_visual(t,a,s)}create_simulation_data(t,e){const a={stimulus:t.stimulus,rt:this.jsPsych.randomization.sampleExGaussian(500,50,.006666666666666667,!0),response:this.jsPsych.pluginAPI.getValidKey(t.choices)},s=this.jsPsych.pluginAPI.mergeSimulationData(a,e);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(t,s),s}simulate_data_only(t,e){const a=this.create_simulation_data(t,e);this.jsPsych.finishTrial(a)}simulate_visual(t,e,a){const s=this.create_simulation_data(t,e),l=this.jsPsych.getDisplayElement();this.trial(l,t),a(),s.rt!==null&&this.jsPsych.pluginAPI.pressKey(s.response,s.rt)}}return p.info=T,p}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
